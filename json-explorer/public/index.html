<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JSON-Explorer - AdTech Toolbox</title>

    <!-- Usercentrics CMP -->
    <script id="usercentrics-cmp" data-settings-id="AVmhdo98bxlHZn" src="https://web.cmp.usercentrics.eu/ui/loader.js" data-tcf-enabled></script>
    
    <script>
      // Domain-Override für Entwicklungsumgebung
      // Behandelt Subdomains wie die Hauptdomain
      window.UC_UI_DOMAINS_OVERRIDE = {
        "jsonexplorer.adtech-toolbox.com": "adtech-toolbox.com",
        "staging.adtech-toolbox.com": "adtech-toolbox.com"
      };
    </script>

    <!-- Custom Cookie Banner für Entwicklung und Staging -->
    <script>
      // Überprüfen, ob wir uns in Produktion befinden
      const isProduction = window.location.hostname === 'www.adtech-toolbox.com';
      
      // Cookie Consent Status
      let consentGiven = false;
      
      // Funktion zum Setzen eines Cookies
      function setCookie(name, value, days) {
        let expires = "";
        if (days) {
          const date = new Date();
          date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
          expires = "; expires=" + date.toUTCString();
        }
        document.cookie = name + "=" + (value || "") + expires + "; path=/";
      }
      
      // Funktion zum Abrufen eines Cookies
      function getCookie(name) {
        const nameEQ = name + "=";
        const ca = document.cookie.split(';');
        for (let i = 0; i < ca.length; i++) {
          let c = ca[i];
          while (c.charAt(0) === ' ') c = c.substring(1, c.length);
          if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);
        }
        return null;
      }
      
      // Funktion zum Anzeigen des Cookie-Banners
      function showCookieBanner() {
        if (!isProduction && !getCookie('cookie-consent')) {
          // Erstelle das Banner
          const banner = document.createElement('div');
          banner.id = 'cookie-banner';
          banner.style.position = 'fixed';
          banner.style.bottom = '0';
          banner.style.left = '0';
          banner.style.right = '0';
          banner.style.background = '#f0f0f0';
          banner.style.padding = '15px';
          banner.style.boxShadow = '0 -2px 10px rgba(0, 0, 0, 0.1)';
          banner.style.zIndex = '9999';
          banner.style.display = 'flex';
          banner.style.justifyContent = 'space-between';
          banner.style.alignItems = 'center';
          
          // Banner-Inhalt
          banner.innerHTML = `
            <div style="flex: 1;">
              <h3 style="margin-top: 0;">Cookie-Hinweis</h3>
              <p>Diese Website verwendet Cookies, um die Benutzererfahrung zu verbessern und Werbung zu personalisieren.</p>
            </div>
            <div style="display: flex; gap: 10px;">
              <button id="accept-cookies" style="background: #4CAF50; color: white; border: none; padding: 8px 15px; cursor: pointer; border-radius: 4px;">Akzeptieren</button>
              <button id="decline-cookies" style="background: #f44336; color: white; border: none; padding: 8px 15px; cursor: pointer; border-radius: 4px;">Ablehnen</button>
              <button id="customize-cookies" style="background: #2196F3; color: white; border: none; padding: 8px 15px; cursor: pointer; border-radius: 4px;">Anpassen</button>
            </div>
          `;
          
          // Banner zum DOM hinzufügen
          document.body.appendChild(banner);
          
          // Event-Listener hinzufügen
          document.getElementById('accept-cookies').addEventListener('click', function() {
            setCookie('cookie-consent', 'accepted', 30);
            banner.style.display = 'none';
            consentGiven = true;
            activateAdvertising();
            location.reload(); // Seite neu laden, damit Werbekomponenten geladen werden
          });
          
          document.getElementById('decline-cookies').addEventListener('click', function() {
            setCookie('cookie-consent', 'declined', 30);
            banner.style.display = 'none';
          });
          
          document.getElementById('customize-cookies').addEventListener('click', function() {
            // Hier könnte eine komplexere Logik für die Anpassung der Cookie-Einstellungen implementiert werden
            alert('Diese Funktion ist noch nicht implementiert.');
          });
        }
      }
      
      // Funktion zur Aktivierung der Werbung
      function activateAdvertising() {
        console.log('Aktiviere Werbe-Einbindung...');
        window.adsEnabled = true;
        // Hier könnten zusätzliche Aktionen zur Aktivierung der Werbung durchgeführt werden
      }
      
      // Banner anzeigen, wenn die Seite geladen ist
      window.addEventListener('DOMContentLoaded', function() {
        // Prüfen, ob bereits Consent gegeben wurde
        if (getCookie('cookie-consent') === 'accepted') {
          consentGiven = true;
          activateAdvertising();
        } else {
          showCookieBanner();
        }
      });
    </script>

    <!-- Debugging-Links -->
    <style>
      .debug-links {
        position: fixed;
        top: 10px;
        right: 10px;
        background: rgba(0,0,0,0.7);
        padding: 10px;
        border-radius: 5px;
        z-index: 1000;
      }
      .debug-links a {
        color: white;
        display: block;
        margin: 5px 0;
        text-decoration: none;
      }
      .debug-links a:hover {
        text-decoration: underline;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    
    <!-- Debug-Links für Entwicklung -->
    <div class="debug-links">
      <a href="/production-test.html" target="_blank">Production Test</a>
      <a href="/json-explorer-test.html" target="_blank">JSON Explorer Test</a>
    </div>
    
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html> 