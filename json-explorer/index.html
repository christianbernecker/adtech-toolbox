<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/adbox-tiny.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AdTech Toolbox</title>
    
    <!-- Dynamic meta robots tag -->
    <script>
      // Check if this is staging or has no_ads parameter
      const isStaging = window.location.hostname.includes('staging');
      const hasNoAdsParam = window.location.search.includes('no_ads');
      
      if (isStaging || hasNoAdsParam) {
        // Create a meta tag to prevent indexing
        const metaRobots = document.createElement('meta');
        metaRobots.name = 'robots';
        metaRobots.content = 'noindex, nofollow';
        document.head.appendChild(metaRobots);
        console.log('Added noindex meta tag');
      }
    </script>
    
    <!-- Usercentrics CMP -->
    <script id="usercentrics-cmp" 
      src="https://app.usercentrics.eu/browser-ui/latest/loader.js" 
      data-settings-id="3M9Jkz5hR" 
      data-tcf-enabled
      async></script>
    <script>
      // Debug helper for Usercentrics
      window.addEventListener('UC_UI_INITIALIZED', function() {
        console.log('Usercentrics initialized successfully');
      });
      
      // Fallback for Usercentrics
      let usercentricsLoaded = false;
      
      // Check if Usercentrics loaded after 3 seconds
      setTimeout(function() {
        if (!window.UC_UI || !window.UC_UI.isInitialized()) {
          console.log('Usercentrics failed to initialize automatically, trying manual load');
          usercentricsLoaded = false;
          
          // Try to reload Usercentrics
          const script = document.createElement('script');
          script.src = 'https://app.usercentrics.eu/browser-ui/latest/loader.js';
          script.id = 'usercentrics-cmp-reload';
          script.setAttribute('data-settings-id', '3M9Jkz5hR');
          script.setAttribute('data-tcf-enabled', '');
          document.head.appendChild(script);
        } else {
          usercentricsLoaded = true;
          console.log('Usercentrics initialized successfully on first try');
        }
      }, 3000);
    </script>
    
    <!-- Prebid.js -->
    <script async src="/prebid.js"></script>
    
    <!-- GPT -->
    <script async src="https://securepubads.g.doubleclick.net/tag/js/gpt.js"></script>
    <script src="/gpt.js"></script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>
