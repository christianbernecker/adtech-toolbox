<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/adbox-tiny.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AdTech Toolbox</title>
    
    <!-- Usercentrics CMP mit manueller Domain-Konfiguration -->
    <script 
      id="usercentrics-cmp" 
      src="https://web.cmp.usercentrics.eu/ui/loader.js" 
      data-settings-id="AVmhdo98bxlHZn" 
      data-tcf-enabled>
    </script>
    
    <!-- Dynamic meta robots tag -->
    <script>
      // Check if this is staging or has no_ads parameter
      const isStaging = window.location.hostname.includes('staging');
      const hasNoAdsParam = window.location.search.includes('no_ads');
      
      if (isStaging || hasNoAdsParam) {
        // Create a meta tag to prevent indexing
        const metaRobots = document.createElement('meta');
        metaRobots.name = 'robots';
        metaRobots.content = 'noindex, nofollow';
        document.head.appendChild(metaRobots);
        console.log('Added noindex meta tag');
      }
    </script>
    
    <!-- Debug helper for Usercentrics -->
    <script>
      // Usercentrics manual domain configuration
      window.addEventListener('UC_UI_INITIALIZED', function() {
        console.log('Usercentrics initialized successfully');
      });
      
      // Lösung für mögliche Subdomain-Probleme
      window.addEventListener('load', function() {
        setTimeout(function() {
          console.log('Usercentrics status check:', 
            window.UC_UI ? 'Available' : 'Not available',
            window.UC_UI?.isInitialized ? 'Function exists' : 'Function missing',
            window.UC_UI?.isInitialized?.() ? 'Initialized' : 'Not initialized'
          );
          
          // Manual domain configuration if needed
          if (window.UC_UI && !window.UC_UI_INITIALIZED) {
            try {
              console.log('Trying manual CMP initialization');
              window.UC_UI.showFirstLayer();
            } catch (e) {
              console.error('Error showing CMP:', e);
            }
          }
        }, 1500);
      });
    </script>
    
    <!-- Prebid.js -->
    <script src="/prebid.js"></script>
    
    <!-- GPT -->
    <script src="https://securepubads.g.doubleclick.net/tag/js/gpt.js"></script>
    <script src="/gpt.js"></script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>
